"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ethOnNearSyncHeight = void 0;
const serialize_1 = require("near-api-js/lib/utils/serialize");
// eslint-disable-next-line @typescript-eslint/no-extraneous-class
class EthOnNearClientBorsh {
    constructor(args) {
        Object.assign(this, args);
    }
}
const schema = new Map([
    [EthOnNearClientBorsh, {
            kind: 'struct',
            fields: [
                ['last_block_number', 'u64']
            ]
        }]
]);
function deserializeEthOnNearClient(raw) {
    return serialize_1.deserialize(schema, EthOnNearClientBorsh, raw);
}
async function ethOnNearSyncHeight(nearClientAccount, nearAccount) {
    // near-api-js requires instantiating an "account" object, even though view
    // functions require no signature and therefore no associated account, so the
    // account name passed in doesn't matter.
    const deserialized = await nearAccount.viewFunction(nearClientAccount, 'last_block_number', {}, { parse: deserializeEthOnNearClient });
    return deserialized.last_block_number.toNumber();
}
exports.ethOnNearSyncHeight = ethOnNearSyncHeight;
//# sourceMappingURL=ethOnNearClient.js.map